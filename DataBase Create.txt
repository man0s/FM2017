DROP DATABASE FM2017;
CREATE DATABASE FM2017;
USE FM2017;

CREATE TABLE Proponitis (
Onomateponumo VARCHAR(50) DEFAULT 'unknown' NOT NULL,
Ilikia TINYINT(2) NOT NULL,
Biografiko TEXT,
nikes TINYINT(3) DEFAULT 0 NOT NULL,
ittes TINYINT(3) DEFAULT 0 NOT NULL,
isopalies TINYINT(3) DEFAULT 0 NOT NULL,
PRIMARY KEY (Onomateponumo)
);

CREATE TABLE Propon_pagkos (
Omada VARCHAR(25) DEFAULT 'unknown' NOT NULL,
Proponitis VARCHAR(25) NOT NULL,
PRIMARY KEY (Omada, Proponitis),
CONSTRAINT PRPNTS
FOREIGN KEY (Proponitis) REFERENCES Proponitis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Gipedo (
Onoma VARCHAR(50) DEFAULT 'unknown' NOT NULL,
Poli VARCHAR(25) DEFAULT 'unknown' NOT NULL,
Xoritikotita MEDIUMINT(5) DEFAULT 0 NOT NULL,
PRIMARY KEY (Onoma)
);

CREATE TABLE Diaititis(
Onomateponumo VARCHAR(50) DEFAULT 'unknown' NOT NULL,
Ilikia TINYINT(2) NOT NULL,
PRIMARY KEY (Onomateponumo)
);

CREATE TABLE Diaititis_epoptis(
Onomateponumo VARCHAR(50) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT NMTPNM2
FOREIGN KEY (Onomateponumo) REFERENCES Diaititis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Diaititis_diaititis(
Onomateponumo VARCHAR(50) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT NMTPNM3
FOREIGN KEY (Onomateponumo) REFERENCES Diaititis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Diaititis_tetartos(
Onomateponumo VARCHAR(50) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT NMTPNM4
FOREIGN KEY (Onomateponumo) REFERENCES Diaititis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Diaititis_paratiritis(
Onomateponumo VARCHAR(50) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT NMTPNM5
FOREIGN KEY (Onomateponumo) REFERENCES Diaititis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Omada (
Onoma VARCHAR(25) DEFAULT 'unknown' NOT NULL,
termata_simeiose TINYINT(3) DEFAULT 0 NOT NULL,
termata_dextike TINYINT(3) DEFAULT 0 NOT NULL,
nikes TINYINT(3) DEFAULT 0 NOT NULL,
ittes TINYINT(3) DEFAULT 0 NOT NULL,
isopalies TINYINT(3) DEFAULT 0 NOT NULL,
vathmoi TINYINT(3) DEFAULT 0 NOT NULL,
Gip_Onoma VARCHAR(50) NOT NULL,
Propon_Onoma VARCHAR(50) NOT NULL,
PRIMARY KEY (Onoma),
CONSTRAINT GPDNM1
FOREIGN KEY (Gip_Onoma) REFERENCES Gipedo (Onoma)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT PRPNNM
FOREIGN KEY (Propon_Onoma) REFERENCES Proponitis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Agonas(
ID_Agona INT(10) NOT NULL AUTO_INCREMENT,
Imerominia DATE NOT NULL,
Ora TIME NOT NULL,
Skor_Gipedouxou TINYINT(2) DEFAULT 0 NOT NULL,
Skor_Filoksenoumenou TINYINT(2) DEFAULT 0 NOT NULL,
Teliko_Apotelesma ENUM('niki', 'itta', 'isopalia') NOT NULL,
Perigrafi TEXT,
Gip_Onoma VARCHAR(50) NOT NULL,
epoptisA VARCHAR(25) NOT NULL,
epoptisB VARCHAR(25) NOT NULL,
diaititis VARCHAR(25) NOT NULL,
tetartos_diaititis VARCHAR(25) NOT NULL,
paratiritis VARCHAR(25) NOT NULL,
Onoma_Gipedouxou VARCHAR(25) NOT NULL,
Onoma_Filoksenoumenou VARCHAR(25) NOT NULL,
PRIMARY KEY (ID_Agona),
CONSTRAINT GPDNM
FOREIGN KEY (Gip_Onoma) REFERENCES Gipedo (Onoma)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT PPTSA
FOREIGN KEY (epoptisA) REFERENCES Diaititis_epoptis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT PPTSB
FOREIGN KEY (epoptisB) REFERENCES Diaititis_epoptis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT DTTS
FOREIGN KEY (diaititis) REFERENCES Diaititis_diaititis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT TTRTS
FOREIGN KEY (tetartos_diaititis) REFERENCES Diaititis_tetartos (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT PRTRTS
FOREIGN KEY (paratiritis) REFERENCES Diaititis_paratiritis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT ONMFLKSNMN
FOREIGN KEY (Onoma_Filoksenoumenou) REFERENCES Omada (Onoma)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT ONMGPDX
FOREIGN KEY (Onoma_Gipedouxou) REFERENCES Omada (Onoma)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Paiktis (
Onomateponumo VARCHAR(50) DEFAULT 'unknown' NOT NULL,
Ilikia TINYINT(2) NOT NULL,
termata_simeiose TINYINT(3) DEFAULT 0 NOT NULL,
Biografiko TEXT,
Onoma_Omadas VARCHAR(25) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT ONMAMADS
FOREIGN KEY (Onoma_Omadas) REFERENCES Omada (Onoma)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Termatofilakas (
Onomateponumo VARCHAR(50) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT NMTPNM
FOREIGN KEY (Onomateponumo) REFERENCES Paiktis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Allo (
Onomateponumo VARCHAR(50) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT NMTPNM1
FOREIGN KEY (Onomateponumo) REFERENCES Paiktis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Skorarei (
Onomateponumo VARCHAR(50) NOT NULL,
ID_Agona INT(10) NOT NULL,
Lepto VARCHAR(10) NOT NULL,
PRIMARY KEY (Onomateponumo, ID_Agona),
CONSTRAINT SKRNMTPNM
FOREIGN KEY (Onomateponumo) REFERENCES Paiktis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT SKRGN
FOREIGN KEY (ID_Agona) REFERENCES Agonas (ID_Agona)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Proedros (
Onomateponumo VARCHAR(50) DEFAULT 'unknown' NOT NULL,
Ilikia TINYINT(2) NOT NULL,
Biografiko TEXT,
Omada_Onoma VARCHAR(25) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT MDNMP
FOREIGN KEY (Omada_Onoma) REFERENCES Omada (Onoma)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Pseudo (
Onoma VARCHAR(25) DEFAULT 'unknown' NOT NULL,
Proedros VARCHAR(50) NOT NULL,
PRIMARY KEY (Onoma, Proedros),
CONSTRAINT PRDR
FOREIGN KEY (Proedros) REFERENCES Proedros (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Eisitirio (
Kodikos INT(10) NOT NULL AUTO_INCREMENT,
PRIMARY KEY (Kodikos)
);

CREATE TABLE Diarkeias (
Kodikos INT(10) NOT NULL,
Kostos MEDIUMINT(3) DEFAULT 200 NOT NULL,
PRIMARY KEY (Kodikos),
CONSTRAINT KDKS
FOREIGN KEY (Kodikos) REFERENCES Eisitirio (Kodikos)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Aplo (
Kodikos INT(10) NOT NULL,
Kostos TINYINT(2) DEFAULT 10 NOT NULL,
ID_Agona INT(10) NOT NULL,
PRIMARY KEY (Kodikos),
CONSTRAINT KDKS1
FOREIGN KEY (Kodikos) REFERENCES Eisitirio (Kodikos)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT IDGN
FOREIGN KEY (ID_Agona) REFERENCES Agonas (ID_Agona)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Filathlos (
Onomateponumo VARCHAR(50) DEFAULT 'unknown' NOT NULL,
Ilikia TINYINT(2) NOT NULL,
Omada_Onoma VARCHAR(25) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT MDNM
FOREIGN KEY (Omada_Onoma) REFERENCES Omada (Onoma)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Katoxos_diarkeias (
Onomateponumo VARCHAR(50) NOT NULL,
Diarkeias_Kodikos INT(10) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT NMTPNM6
FOREIGN KEY (Onomateponumo) REFERENCES Filathlos (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT DRKSKDKS
FOREIGN KEY (Diarkeias_Kodikos) REFERENCES Diarkeias (Kodikos)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Katoxos_aplo (
Onomateponumo VARCHAR(50) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT NMTPNM7
FOREIGN KEY (Onomateponumo) REFERENCES Filathlos (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE kato_apo_misous (
Onomateponumo VARCHAR(50) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT NMTPNM8
FOREIGN KEY (Onomateponumo) REFERENCES Katoxos_aplo (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE pano_apo_misous (
Onomateponumo VARCHAR(50) NOT NULL,
PRIMARY KEY (Onomateponumo),
CONSTRAINT NMTPNM9
FOREIGN KEY (Onomateponumo) REFERENCES Katoxos_aplo (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE prosklisi_an (
Proskeklimenos VARCHAR(50) NOT NULL,
Aitisi VARCHAR(25) NOT NULL,
PRIMARY KEY (Proskeklimenos, Aitisi),
CONSTRAINT PRSKKLMNS
FOREIGN KEY (Proskeklimenos) REFERENCES Katoxos_diarkeias (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT TS
FOREIGN KEY (Aitisi) REFERENCES Omada (Onoma)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE prosklisi_en (
Proskeklimenos VARCHAR(50) NOT NULL,
Aitisi VARCHAR(25) NOT NULL,
PRIMARY KEY (Proskeklimenos, Aitisi),
CONSTRAINT PRSKKLMNS1
FOREIGN KEY (Proskeklimenos) REFERENCES pano_apo_misous (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT TS1
FOREIGN KEY (Aitisi) REFERENCES Omada (Onoma)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE ypostiriksi (
Ypostiriktis VARCHAR(50) NOT NULL,
Paiktis VARCHAR(50) NOT NULL,
PRIMARY KEY (Ypostiriktis, Paiktis),
CONSTRAINT PSTRKTS
FOREIGN KEY (Ypostiriktis) REFERENCES Filathlos (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT PKTS
FOREIGN KEY (Paiktis) REFERENCES Paiktis (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Agora (
Eisitirio INT(10) NOT NULL,
Agorastis VARCHAR(50) NOT NULL,
PRIMARY KEY (Eisitirio, Agorastis),
CONSTRAINT STR
FOREIGN KEY (Eisitirio) REFERENCES Eisitirio (Kodikos)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT GRSTS
FOREIGN KEY (Agorastis) REFERENCES Filathlos (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE exei_aplo (
Eisitirio INT(10) NOT NULL,
Katoxos VARCHAR(50) NOT NULL,
PRIMARY KEY (Eisitirio, Katoxos),
CONSTRAINT STR1
FOREIGN KEY (Eisitirio) REFERENCES Aplo (Kodikos)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT KTXS
FOREIGN KEY (Katoxos) REFERENCES Katoxos_aplo (Onomateponumo)
ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE antistoixei_diarkeias (
Diarkeias_Kodikos INT(10) NOT NULL,
ID_Agona INT(10) NOT NULL,
PRIMARY KEY (Diarkeias_Kodikos, ID_Agona),
CONSTRAINT ANTDRKSKDKS
FOREIGN KEY (Diarkeias_Kodikos) REFERENCES Diarkeias (Kodikos)
ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT ANTIDGN
FOREIGN KEY (ID_Agona) REFERENCES Agonas (ID_Agona)
ON DELETE CASCADE ON UPDATE CASCADE
);